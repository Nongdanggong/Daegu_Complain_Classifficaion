<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Í¥ÄÎ¶¨Ïûê ÌéòÏù¥ÏßÄ</title>
    <link rel="stylesheet" href="../static/css/manager.css">
</head>
<body>
    <main calss="contents">
    <h1>Í¥ÄÎ¶¨Ïûê ÌéòÏù¥ÏßÄ üíª</h1>
    <select id="subscription_page">
        <option value="BukGu" selected>Î∂ÅÍµ¨</option>
        <option value="DalseongGun">Îã¨ÏÑ±Íµ∞</option>
        <option value="DalsuGu">Îã¨ÏÑúÍµ¨</option>
        <option value="DongGu">ÎèôÍµ¨</option>
        <option value="JungGu">Ï§ëÍµ¨</option>
        <option value="NamGu">ÎÇ®Íµ¨</option>
        <option value="SeoGu">ÏÑúÍµ¨</option>
        <option value="Suseonggu">ÏàòÏÑ±Íµ¨</option>
    </select>
    <section class="wrap">
        <div class="contents-wrap table-wrap">
                <table class="table">
                    <thead>
                        <tr>  
                            <th class="th_num" width='30px'>No.</th>
                            <th class="th_text">ÎØºÏõê ÎÇ¥Ïö©</th>
                            <th class="th_sub" width='150px'>Ï≤òÎ¶¨ Î∂ÄÏÑú</th>
                        </tr>
                    </thead>
                    <tbody class="table-body">
                        <tr>
                            <td class="td_num" id = "num"></td>
                            <td class="td_text" id = "text"></td>
                            <td class="td_sub" id = "category" width='150px'></td>
                        </tr>
                    </tbody>
                </table>
        </div>
    </section>          
    <script>
        // Î°úÏª¨ Ïä§ÌÜ†Î¶¨ÏßÄÏóêÏÑú Îç∞Ïù¥ÌÑ∞ Í∞ÄÏ†∏Ïò§Í∏∞
        const data_list = localStorage.getItem('storedData');

        // data_listÏùò Í∞íÏù¥ ÏûàÏùÑ Îïå
        if (data_list !== null) {
            // Îç∞Ïù¥ÌÑ∞Î•º JSONÌòïÏãùÏúºÎ°ú ÌååÏã±Ìï¥ÏÑú dataListÎ°ú ÏÑ†Ïñ∏
            const dataList = JSON.parse(data_list);
    
            // subscription_pageÏóêÏÑú ÏÑ†ÌÉùÌïú Íµ¨Î•º Í∞ÄÏ†∏ÏôÄÏÑú Î≥ÄÏàòÎ°ú ÎßåÎì§Í≥†
            const subscriptionPage = document.getElementById("subscription_page").value;
            // dataListÏóêÏÑú subscriptionPageÏôÄ ÏùºÏπòÌïòÎäî Í∞íÏùÑ Ï∞æÏïÑÏÑú filteredDataListÏóê Ï†ÄÏû•
            const filteredDataList = dataList.filter(data => data.subscription === subscriptionPage);
    
            // Îç∞Ïù¥ÌÑ∞ ÌÖåÏù¥Î∏îÏóê Ï∂îÍ∞Ä
            const tableBody = document.querySelector('.table-body');
            tableBody.innerHTML = ''; // ÌÖåÏù¥Î∏î Ï¥àÍ∏∞Ìôî
            filteredDataList.forEach((data, index) => {
                const row = `
                    <tr>
                        <td>${index + 1}</td>
                        <td>${data.text}</td>
                        <td>${data.category}</td>
                    </tr>
                `;
                tableBody.innerHTML += row;
            });
        } else {
            console.log("No stored data found.");
        }
    
        // subscription ÌéòÏù¥ÏßÄ Î≥ÄÍ≤Ω Ïãú Îç∞Ïù¥ÌÑ∞ ÏóÖÎç∞Ïù¥Ìä∏
        document.getElementById("subscription_page").addEventListener("change", function() {
            const dataList = JSON.parse(localStorage.getItem('storedData'));
            const subscriptionPage = this.value;
            const filteredDataList = dataList.filter(data => data.subscription === subscriptionPage);
            const tableBody = document.querySelector('.table-body');
            tableBody.innerHTML = ''; // ÌÖåÏù¥Î∏î Ï¥àÍ∏∞Ìôî
            filteredDataList.forEach((data, index) => {
                const row = `
                    <tr>
                        <td>${index + 1}</td>
                        <td>${data.text}</td>
                        <td>${data.category}</td>
                    </tr>
                `;
                tableBody.innerHTML += row;
            });
        });


    </script>
</main>
</body>
</html> 